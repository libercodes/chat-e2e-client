[{"/Users/liber/trabajo/personal/chat-e2e-client/src/index.tsx":"1","/Users/liber/trabajo/personal/chat-e2e-client/src/reportWebVitals.ts":"2","/Users/liber/trabajo/personal/chat-e2e-client/src/redux/store.ts":"3","/Users/liber/trabajo/personal/chat-e2e-client/src/App.tsx":"4","/Users/liber/trabajo/personal/chat-e2e-client/src/redux/root.reducer.ts":"5","/Users/liber/trabajo/personal/chat-e2e-client/src/components/routes/Routes.tsx":"6","/Users/liber/trabajo/personal/chat-e2e-client/src/redux/chat.reducer.ts":"7","/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/Chat.tsx":"8","/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/Home.tsx":"9","/Users/liber/trabajo/personal/chat-e2e-client/src/services/chat.service.ts":"10","/Users/liber/trabajo/personal/chat-e2e-client/src/types/types.ts":"11","/Users/liber/trabajo/personal/chat-e2e-client/src/config/socket.ts":"12","/Users/liber/trabajo/personal/chat-e2e-client/src/components/layouts/Navbar.tsx":"13","/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/PublicRooms.tsx":"14","/Users/liber/trabajo/personal/chat-e2e-client/src/redux/rooms.reducer.ts":"15","/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/HomePanel.tsx":"16"},{"size":824,"mtime":1627839345195,"results":"17","hashOfConfig":"18"},{"size":436,"mtime":1627839345196,"results":"19","hashOfConfig":"18"},{"size":354,"mtime":1627839345196,"results":"20","hashOfConfig":"18"},{"size":570,"mtime":1627839345193,"results":"21","hashOfConfig":"18"},{"size":326,"mtime":1627848431901,"results":"22","hashOfConfig":"18"},{"size":327,"mtime":1627839345194,"results":"23","hashOfConfig":"18"},{"size":4066,"mtime":1627854632755,"results":"24","hashOfConfig":"18"},{"size":7151,"mtime":1627839345194,"results":"25","hashOfConfig":"18"},{"size":1043,"mtime":1627855563450,"results":"26","hashOfConfig":"18"},{"size":998,"mtime":1627854352805,"results":"27","hashOfConfig":"18"},{"size":354,"mtime":1627853651346,"results":"28","hashOfConfig":"18"},{"size":267,"mtime":1627839345195,"results":"29","hashOfConfig":"18"},{"size":2341,"mtime":1627839345193,"results":"30","hashOfConfig":"18"},{"size":2021,"mtime":1627854626983,"results":"31","hashOfConfig":"18"},{"size":1052,"mtime":1627848496749,"results":"32","hashOfConfig":"18"},{"size":3741,"mtime":1627855525904,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1rkpd8m",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/liber/trabajo/personal/chat-e2e-client/src/index.tsx",[],["68","69","70","71","72","73"],"/Users/liber/trabajo/personal/chat-e2e-client/src/reportWebVitals.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/redux/store.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/App.tsx",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/redux/root.reducer.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/components/routes/Routes.tsx",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/redux/chat.reducer.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/Chat.tsx",["74"],"import React, { useEffect, useRef, useState } from 'react';\nimport {\n  FormControlProps,\n  Button, Col, Form, Modal, Row,\n} from 'react-bootstrap';\n\nimport { ConnectedProps, connect } from 'react-redux';\nimport styled from 'styled-components';\nimport * as chatThunks from '../../redux/chat.reducer';\nimport { RootState } from '../../redux/root.reducer';\nimport { Message } from '../../types/apiResponse.types';\nimport { DisconnectEvent, EnumBESocketEvents, EnumSocketClientEvents } from '../../types/types';\nimport NavbarComponent from '../layouts/Navbar';\n\nimport { socket } from '../../config/socket';\n\nconst {\n  BE_ADD_MESSAGE,\n} = EnumBESocketEvents;\n\nconst {\n  ADD_MESSAGE,\n  DISCONNECT,\n} = EnumSocketClientEvents;\n\nconst Chat = ({ messages, ...props }: Props) => {\n  const [showModal, setShowModal] = useState(true);\n  const [userInput, setUserInput] = useState('');\n  const [inputText, setInputText] = useState('');\n  const lastMessageElement = useRef<HTMLDivElement>(null);\n  const containerMessagesElement = useRef<HTMLDivElement>(null);\n  const [isScrollAtBottom, setIsScrollAtBottom] = useState(true);\n\n  useEffect(() => {\n    let isMounted = true;\n    if (isMounted) {\n      console.log('joining socket');\n      socket.emit('join', props.room?.code);\n      socket.on(ADD_MESSAGE, (data: Message) => {\n        props.addMessage(data);\n      });\n      socket.on(DISCONNECT, (data: DisconnectEvent) => {\n        props.disconnectFromEvent(data);\n      });\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const scrollToBottom = () => {\n      if (lastMessageElement.current) {\n        if (isScrollAtBottom) {\n          lastMessageElement?.current!.scrollIntoView({\n            block: 'start',\n            behavior: 'smooth',\n          });\n        }\n      }\n    };\n    scrollToBottom();\n  }, [messages, isScrollAtBottom]);\n\n  const handleScroll = () => {\n    const {\n      scrollHeight,\n      scrollTop,\n      clientHeight,\n    } = containerMessagesElement.current!;\n\n    const isAtBottom = scrollHeight - scrollTop === clientHeight;\n    if (isAtBottom) {\n      setIsScrollAtBottom(true);\n    } else {\n      setIsScrollAtBottom(false);\n    }\n  };\n\n  const shouldModalClose = () => {\n    if (props.myuser) setShowModal(false);\n  };\n  const handleSetUser = () => {\n    if (!userInput) return;\n    props.setUser(userInput);\n    setShowModal(false);\n  };\n\n  const handleSend = (event: any) => {\n    if (event.key !== 'Enter') return;\n    if (!InputEvent) return;\n\n    const message: Message = {\n      text: inputText,\n      user: props.myuser,\n      date: new Date().toString(),\n    };\n\n    socket.emit(BE_ADD_MESSAGE, message);\n    setInputText('');\n  };\n\n  return (\n    <Row className=\"d-flex justify-content-center\">\n      <Modal show={showModal} onHide={shouldModalClose}>\n        <Modal.Header>\n          <Modal.Title>Insert username</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <Form.Control\n            placeholder=\"User123\"\n            onChange={(e) => setUserInput(e.target.value)}\n          />\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button\n            variant=\"primary\"\n            onClick={() => handleSetUser()}\n          >\n            Save changes\n\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Col md={12} sm={12} className=\"d-flex align-items-center justify-content-center flex-column\">\n        <Row>\n          <ChatColumn md={12} sm={12}>\n            <NavbarComponent />\n            <Row>\n              <ScrollableCol\n                md={12}\n                ref={containerMessagesElement}\n                onScroll={() => handleScroll()}\n              >\n                {\n                    messages.map((message) => (\n                      <Row\n                        ref={lastMessageElement}\n                        // eslint-disable-next-line react/no-array-index-key\n                      >\n                        <Col>\n                          {\n                            props.systemName === message.user\n                              ? (\n                                <p>\n                                  {`[${new Date(message.date).toLocaleTimeString()}] `}\n                                  <CustomSpan color=\"gray\">{`${message.text}`}</CustomSpan>\n\n                                </p>\n                              )\n                              : (\n                                <p>\n                                  {`[${new Date(message.date).toLocaleTimeString()}] `}\n                                  <CustomSpan color=\"#fefb62\">{`(${message.user})   `}</CustomSpan>\n                                  <CustomSpan>{`${message.text}`}</CustomSpan>\n\n                                </p>\n                              )\n                          }\n\n                        </Col>\n                      </Row>\n                    ))\n                }\n              </ScrollableCol>\n\n            </Row>\n            <TextBox\n              placeholder=\"Write something...\"\n              onChange={(e: any) => setInputText(e.target.value)}\n              value={inputText}\n              onKeyDown={handleSend}\n            />\n          </ChatColumn>\n        </Row>\n      </Col>\n    </Row>\n  );\n};\n\nconst ScrollableCol = styled(Col)`\n    height: 60vh;\n    display: flex;\n    flex-direction: column;\n    padding: 0 2rem;\n    overflow-y: scroll;\n    @media (max-width: 768px) {\n        height:  calc(100vh - 3rem);\n        max-height:calc(100vh - 3rem);\n    }\n    ::-webkit-scrollbar {\n        width: 7px;\n    }\n\n    ::-webkit-scrollbar-track {\n        background: black; \n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background: #888; \n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background: #555; \n    }\n`;\n\nconst ChatColumn = styled(Col)`\n    width: 50vw;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n    background-color: black;\n    overflow: hidden;\n    @media (max-width: 768px) {\n        height: 100vh;\n        width: 100%;\n    }\n    \n`;\n\nconst CustomSpan = styled.span`\n    color: ${(props) => props.color || 'inherit'};\n`;\n\nconst TextBox = styled(Form.Control)<FormControlProps>`\n    height: 3rem;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background-color: #3b3b3b;\n    border: none;\n    color: inherit;\n    border-radius: 0;\n    :focus {\n        outline: none;\n        background-color: #4d4c4c;\n        color: rgb(0, 189, 0);\n    }\n\n`;\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  setUser: (name: string) => dispatch(chatThunks.setUser(name)),\n  addMessage: (message: Message) => dispatch(chatThunks.addMessage(message)),\n  disconnectFromEvent: (value: DisconnectEvent) => dispatch(chatThunks.disconnectFromRoom(value)),\n  disconnect: (id: string) => dispatch(chatThunks.disconnectChat(id)),\n});\n\nconst mapStateToProps = (state: RootState) => ({\n  myuser: state.chat.myuser,\n  messages: state.chat.messages,\n  systemName: state.chat.systemName,\n  room: state.chat.room,\n});\n\nconst connectToStore = connect(mapStateToProps, mapDispatchToProps);\ninterface Props extends ConnectedProps<typeof connectToStore> {}\n\nexport default connectToStore(Chat);\n","/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/Home.tsx",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/services/chat.service.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/types/types.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/config/socket.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/components/layouts/Navbar.tsx",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/PublicRooms.tsx",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/redux/rooms.reducer.ts",[],"/Users/liber/trabajo/personal/chat-e2e-client/src/components/views/HomePanel.tsx",[],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","severity":1,"message":"88","line":37,"column":7,"nodeType":"89","messageId":"90","endLine":37,"endColumn":18},"lines-around-directive",["91"],"no-spaced-func",["92"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-console","Unexpected console statement.","MemberExpression","unexpected","padding-line-between-statements","func-call-spacing"]